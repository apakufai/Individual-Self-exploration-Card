<!doctype html>
<html lang="ru">

<head>
	<meta charset="utf-8">
	<title>Администрация. ИКС-файл</title>
	<script type="text/javascript"></script>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/style_adminCab.css') }}">
	<link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon">
</head>

<body>

	<header class="header">
		<div class="header_ISeC">ИКС-файл. Администраторная</div>
		<div class="header_admin">
			<span>
				Привет, <a href="{{ url_for('index') }}">{{ session['adminName'] }}</a> |
				<a href="{{ url_for('index') }}">Тест</a> |
				<a href="{{ url_for('logout') }}">Выйти</a>
			</span>
		</div>
	</header>

	<main class="main">
		<div class="side_menu">
			<button class="btn_sidelink" onclick="window.location.href='http://127.0.0.1:5000/cab_archive'">
				Архив
			</button>

			<button class="btn_sidelink_actual" onclick="window.location.href='http://127.0.0.1:5000/cab_codes'">
				Коды доступа
			</button>

			<button class="btn_sidelink" onclick="window.location.href='http://127.0.0.1:5000/cab_analysis'">
				Анализ по вопросам
			</button>

			<button class="btn_sidelink" onclick="window.location.href='http://127.0.0.1:5000/cab_excelgen'">
				Выборки (excel)
			</button>

			<button class="btn_sidelink" onclick="window.location.href='http://127.0.0.1:5000/cab_admins'">
				Администраторы
			</button>

		</div>

		<div class="central_codes">

			<table>
				<thead>
					<tr class="entrycode_head">
						<th class="entrycode_head_th_0">
							<p>Дата</p>
						</th>
						<th class="entrycode_head_th_1">
							<p>Название группы</p>
						</th>
						<th class="entrycode_head_th_2">
							<p>Код доступа</p>
						</th>
						<th class="entrycode_head_th_3">
							<p>Начало</p>
						</th>
						<th class="entrycode_head_th_4">
							<p>Конец</p>
						</th>
						<th colspan="2" class="entrycode_head_th_5">
							<p>Действия</p>
						</th>
					</tr>
				</thead>

				<tbody>

					<tr class="entrycode_block_create">
						<td class="entrycode_block_td_0">
						</td>
						<td class="entrycode_block_td_1">
							<input type="text" name="test_group">
						</td>
						<td class="entrycode_block_td_2">
							<input type="text" name="code">
						</td>
						<td class="entrycode_block_td_3">
							<input type="date" name="start_date">
						</td>
						<td class="entrycode_block_td_4">
							<input type="date" name="end_date">
						</td>
						<td class="entrycode_block_td_5">
							<button onclick="createCode(this)">Создать</button>
						</td>
					</tr>

					{% for accessRow in accessRows %}
					<tr class="entrycode_block">
						<td class="entrycode_block_td_0">
							{{ accessRow.test_group[:10] }}
						</td>
						<td class="entrycode_block_td_1">
							<input type="text" name="test_group" value="{{ accessRow.test_group[11:] }}">
						</td>
						<td class="entrycode_block_td_2">
							<input type="text" name="code" value="{{ accessRow.code }}">
						</td>
						<td class="entrycode_block_td_3">
							<input type="date" name="start_date" value="{{ accessRow.start_date }}">
						</td>
						<td class="entrycode_block_td_4">
							<input type="date" name="end_date" value="{{ accessRow.end_date }}">
						</td>
						<td class="entrycode_block_td_5">
							<button code_id="{{ accessRow.code_id }}" onclick="updateCode(this)">Сохранить</button>
							<button code_id="{{ accessRow.code_id }}" test_group="{{ accessRow.test_group }}" onclick="deleteCode(this)">Удалить</button>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>

			<script src="{{ url_for('static', filename='js/functions_adminCab.js') }}"></script>
			<script>
				function confirmUpdate(testGroup) {
					return confirm(`Сохранить изменения?`);
				}
				function confirmDelete(testGroup) {
					return confirm(`Удалить группу ${testGroup}?`);
				}
			</script>


		</div>





	</main>


</body>

</html>